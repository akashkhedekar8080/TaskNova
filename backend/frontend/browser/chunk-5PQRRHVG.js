import{A as J,B as K,E as Q,F as W,H as X,I as Y,J as ee,K as te,L as re,M as ie,c as y,e as m,g as F,h as k,j as I,l as R,m as L,o as T,p as O,q as B,r as A,s as N,t as G,u as V,v as q,w as j,z as Z}from"./chunk-26YCBCTJ.js";import{Aa as i,Ac as D,Ba as p,Cc as U,Ec as H,Fb as P,Fc as $,Gc as z,Ha as C,Ia as v,Sa as s,Ta as M,Ua as w,a as x,aa as o,ea as f,ia as E,na as c,pa as b,qa as h,va as u,yb as S,za as n}from"./chunk-TREO7I3X.js";function ae(a,r){if(a&1&&(n(0,"mat-error"),s(1),i()),a&2){let e=v();o(),w(" ",e.getErrorMessage("username")," ")}}function oe(a,r){if(a&1&&(n(0,"mat-error"),s(1),i()),a&2){let e=v();o(),w(" ",e.getErrorMessage("email")," ")}}function se(a,r){if(a&1&&(n(0,"mat-error"),s(1),i()),a&2){let e=v();o(),w(" ",e.getErrorMessage("password")," ")}}function le(a,r){if(a&1&&(n(0,"mat-error"),s(1),i()),a&2){let e=v();o(),w(" ",e.getErrorMessage("confirmPassword")," ")}}function me(a,r){a&1&&p(0,"mat-spinner",14)}function de(a,r){a&1&&(n(0,"span"),s(1,"Register"),i())}var ne=class a{constructor(r,e,t,l){this.fb=r;this.router=e;this.authService=t;this.snackBar=l}registerForm;hidePassword=!0;hideConfirmPassword=!0;isLoading=!1;registerError="";ngOnInit(){this.registerForm=this.fb.group({username:["",[m.required,m.minLength(2)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(8),this.passwordValidator]],confirmPassword:["",[m.required]]},{validators:this.passwordMatchValidator})}passwordValidator(r){let e=r.value;if(!e)return null;let t=/[0-9]/.test(e),l=/[A-Z]/.test(e),d=/[a-z]/.test(e);return t&&l&&d?null:{passwordStrength:!0}}passwordMatchValidator(r){let e=r.get("password"),t=r.get("confirmPassword");return e&&t&&e.value!==t.value?{passwordMismatch:!0}:null}onSubmit(){if(this.registerForm.valid){this.isLoading=!0,this.registerError="";let r=x({},this.registerForm.value);delete r.confirmPassword,this.authService.register(r).subscribe({next:e=>{console.log("Registration successful:",e),this.isLoading=!1,this.snackBar.open("Registration successful! Please login.","Close",{duration:5e3,panelClass:["success-snackbar"]}),this.router.navigate(["/login"])},error:e=>{console.error("Registration failed:",e),this.isLoading=!1,e.message.includes("400")?e.message.toLowerCase().includes("username")?this.registerError="Username already exists":e.message.toLowerCase().includes("email")?this.registerError="Email already exists":this.registerError="Please check your input data":e.message.includes("Server Error")?this.registerError="Server error. Please try again later.":this.registerError="Registration failed. Please try again.",this.snackBar.open(this.registerError,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}else this.markFormGroupTouched()}getErrorMessage(r){let e=this.registerForm.get(r);if(e?.hasError("required"))return`${this.formatFieldName(r)} is required`;if(e?.hasError("email"))return"Please enter a valid email";if(e?.hasError("minlength")){let t=e.errors?.minlength.requiredLength;return`${this.formatFieldName(r)} must be at least ${t} characters`}return e?.hasError("passwordStrength")?"Password must contain uppercase, lowercase, and number":r==="confirmPassword"&&this.registerForm.hasError("passwordMismatch")?"Passwords do not match":""}formatFieldName(r){switch(r){case"firstName":return"First name";case"lastName":return"Last name";case"confirmPassword":return"Confirm password";default:return r.charAt(0).toUpperCase()+r.slice(1)}}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(r=>{this.registerForm.get(r)?.markAsTouched()})}navigateToLogin(){this.router.navigate(["/login"])}onInputChange(){this.registerError&&(this.registerError="")}static \u0275fac=function(e){return new(e||a)(f(T),f(S),f(P),f(re))};static \u0275cmp=E({type:a,selectors:[["app-register"]],decls:48,vars:13,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],[1,"name-row"],["appearance","outline",1,"half-width"],["matInput","","type","text","formControlName","username","placeholder","username"],["matSuffix",""],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","your@email.com"],["matInput","","formControlName","password","placeholder","Enter password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm password",3,"type"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20"],[1,"auth-links"],["mat-button","","color","accent",3,"click"]],template:function(e,t){if(e&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),s(4,"Register"),i(),n(5,"mat-card-subtitle"),s(6,"Create your account"),i()(),n(7,"mat-card-content")(8,"form",2),C("ngSubmit",function(){return t.onSubmit()}),n(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),s(12,"Username"),i(),p(13,"input",5),n(14,"mat-icon",6),s(15,"person"),i(),c(16,ae,2,1,"mat-error"),i()(),n(17,"mat-form-field",7)(18,"mat-label"),s(19,"Email"),i(),p(20,"input",8),n(21,"mat-icon",6),s(22,"email"),i(),c(23,oe,2,1,"mat-error"),i(),n(24,"mat-form-field",7)(25,"mat-label"),s(26,"Password"),i(),p(27,"input",9),n(28,"button",10),C("click",function(){return t.hidePassword=!t.hidePassword}),n(29,"mat-icon"),s(30),i()(),c(31,se,2,1,"mat-error"),i(),n(32,"mat-form-field",7)(33,"mat-label"),s(34,"Confirm Password"),i(),p(35,"input",11),n(36,"button",10),C("click",function(){return t.hideConfirmPassword=!t.hideConfirmPassword}),n(37,"mat-icon"),s(38),i()(),c(39,le,2,1,"mat-error"),i(),n(40,"div",12)(41,"button",13),c(42,me,1,0,"mat-spinner",14)(43,de,2,0,"span"),i()()()(),n(44,"mat-card-actions")(45,"div",15)(46,"button",16),C("click",function(){return t.navigateToLogin()}),s(47," Already have an account? Login "),i()()()()()),e&2){let l,d,g,_;o(8),h("formGroup",t.registerForm),o(8),u((l=t.registerForm.get("username"))!=null&&l.invalid&&((l=t.registerForm.get("username"))!=null&&l.touched)?16:-1),o(7),u((d=t.registerForm.get("email"))!=null&&d.invalid&&((d=t.registerForm.get("email"))!=null&&d.touched)?23:-1),o(4),h("type",t.hidePassword?"password":"text"),o(),b("aria-label","Hide password"),o(2),M(t.hidePassword?"visibility_off":"visibility"),o(),u((g=t.registerForm.get("password"))!=null&&g.invalid&&((g=t.registerForm.get("password"))!=null&&g.touched)?31:-1),o(4),h("type",t.hideConfirmPassword?"password":"text"),o(),b("aria-label","Hide confirm password"),o(2),M(t.hideConfirmPassword?"visibility_off":"visibility"),o(),u((_=t.registerForm.get("confirmPassword"))!=null&&_.invalid&&((_=t.registerForm.get("confirmPassword"))!=null&&_.touched)||t.registerForm.hasError("passwordMismatch")?39:-1),o(2),h("disabled",t.isLoading),o(),u(t.isLoading?42:43)}},dependencies:[O,I,y,F,k,R,L,j,B,V,N,q,G,A,W,Q,Z,J,K,Y,X,H,U,D,z,$,te,ee,ie],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 8px 32px #0000001a;border-radius:16px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.half-width[_ngcontent-%COMP%]{width:calc(50% - 8px);margin-bottom:16px}.half-width[_ngcontent-%COMP%]:first-child{margin-right:16px}.name-row[_ngcontent-%COMP%]{display:flex;gap:0}.form-actions[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px}.auth-links[_ngcontent-%COMP%]{width:100%;text-align:center}mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}mat-card-title[_ngcontent-%COMP%]{font-size:28px;font-weight:500}mat-card-subtitle[_ngcontent-%COMP%]{margin-top:8px;opacity:.7}mat-spinner[_ngcontent-%COMP%]{margin-right:8px}"]})};export{ne as RegisterComponent};
