import{A as z,B as U,E as J,F as K,H as Q,I as W,J as X,K as Y,L as Z,M as tt,c as E,e as d,g as w,h as F,j as L,l as P,m as y,o as k,p as I,q as O,r as T,s as B,t as G,u as N,v as R,w as j,z as H}from"./chunk-26YCBCTJ.js";import{Aa as r,Ac as A,Ba as f,Cc as D,Ec as q,Fb as S,Fc as V,Gc as $,Ha as h,Ia as v,Sa as l,Ta as b,Ua as M,aa as a,ea as m,ia as C,na as u,pa as _,qa as p,va as g,yb as x,za as n}from"./chunk-TREO7I3X.js";function it(o,t){if(o&1&&(n(0,"mat-error"),l(1),r()),o&2){let i=v();a(),M(" ",i.getErrorMessage("username")," ")}}function nt(o,t){if(o&1&&(n(0,"mat-error"),l(1),r()),o&2){let i=v();a(),M(" ",i.getErrorMessage("password")," ")}}function rt(o,t){o&1&&f(0,"mat-spinner",10)}function ot(o,t){o&1&&(n(0,"span"),l(1,"Login"),r())}var et=class o{constructor(t,i,e,s){this.fb=t;this.router=i;this.authService=e;this.snackBar=s}loginForm;hidePassword=!0;isLoading=!1;loginError="";ngOnInit(){this.loginForm=this.fb.group({username:["",[d.required,d.minLength(4)]],password:["",[d.required,d.minLength(6)]]})}onSubmit(){this.loginForm.valid?(this.isLoading=!0,this.loginError="",this.authService.login(this.loginForm.value).subscribe({next:t=>{console.log("Login successful:",t),this.isLoading=!1,this.snackBar.open("Login successful!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/"])},error:t=>{console.error("Login failed:",t),this.isLoading=!1,t.message.includes("401")?this.loginError="Invalid username or password":t.message.includes("400")?this.loginError="Please check your credentials":t.message.includes("Server Error")?this.loginError="Server error. Please try again later.":this.loginError="Login failed. Please try again.",this.snackBar.open(this.loginError,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})):this.markFormGroupTouched()}getErrorMessage(t){let i=this.loginForm.get(t);if(i?.hasError("required"))return`${t} is required`;if(i?.hasError("email"))return"Please enter a valid email";if(i?.hasError("minlength")){let e=i.getError("minlength")?.requiredLength;return`${t} must be at least ${e} characters`}return""}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}navigateToRegister(){this.router.navigate(["/register"])}onInputChange(){this.loginError&&(this.loginError="")}static \u0275fac=function(i){return new(i||o)(m(k),m(x),m(S),m(Z))};static \u0275cmp=C({type:o,selectors:[["app-login"]],decls:32,vars:9,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","text","formControlName","username","placeholder","username"],["matSuffix",""],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20"],[1,"auth-links"],["mat-button","","color","accent",3,"click"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),l(4,"Login"),r(),n(5,"mat-card-subtitle"),l(6,"Please enter your credentials"),r()(),n(7,"mat-card-content")(8,"form",2),h("ngSubmit",function(){return e.onSubmit()}),n(9,"mat-form-field",3)(10,"mat-label"),l(11,"Username"),r(),f(12,"input",4),n(13,"mat-icon",5),l(14,"username"),r(),u(15,it,2,1,"mat-error"),r(),n(16,"mat-form-field",3)(17,"mat-label"),l(18,"Password"),r(),f(19,"input",6),n(20,"button",7),h("click",function(){return e.hidePassword=!e.hidePassword}),n(21,"mat-icon"),l(22),r()(),u(23,nt,2,1,"mat-error"),r(),n(24,"div",8)(25,"button",9),u(26,rt,1,0,"mat-spinner",10)(27,ot,2,0,"span"),r()()()(),n(28,"mat-card-actions")(29,"div",11)(30,"button",12),h("click",function(){return e.navigateToRegister()}),l(31," Don't have an account? Register "),r()()()()()),i&2){let s,c;a(8),p("formGroup",e.loginForm),a(7),g((s=e.loginForm.get("username"))!=null&&s.invalid&&((s=e.loginForm.get("username"))!=null&&s.touched)?15:-1),a(4),p("type",e.hidePassword?"password":"text"),a(),_("aria-label","Hide password")("aria-pressed",e.hidePassword),a(2),b(e.hidePassword?"visibility_off":"visibility"),a(),g((c=e.loginForm.get("password"))!=null&&c.invalid&&((c=e.loginForm.get("password"))!=null&&c.touched)?23:-1),a(2),p("disabled",e.isLoading),a(),g(e.isLoading?26:27)}},dependencies:[I,L,E,w,F,P,y,j,O,N,B,R,G,T,K,J,H,z,U,W,Q,q,D,A,$,V,Y,X,tt],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 8px 32px #0000001a;border-radius:16px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.half-width[_ngcontent-%COMP%]{width:calc(50% - 8px);margin-bottom:16px}.half-width[_ngcontent-%COMP%]:first-child{margin-right:16px}.name-row[_ngcontent-%COMP%]{display:flex;gap:0}.form-actions[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px}.auth-links[_ngcontent-%COMP%]{width:100%;text-align:center}mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}mat-card-title[_ngcontent-%COMP%]{font-size:28px;font-weight:500}mat-card-subtitle[_ngcontent-%COMP%]{margin-top:8px;opacity:.7}mat-spinner[_ngcontent-%COMP%]{margin-right:8px}"]})};export{et as LoginComponent};
